@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Пользователи</h2>

<table class="table">
    <thead>
        <tr>
            <th>#</th>
            <td>Логин</td>
            <td>Роль</td>
        </tr>
    </thead>
    <tbody>
        @for (int i = 0, number = 1; i < ViewBag.allUsers.Count; i++)
        {
            if (ViewBag.allUsers[i].id != ViewBag.user.id)
            {
                <tr>
                    <th scope="row">@(number++)</th>
                    <td>@ViewBag.allUsers[i].login</td>
                    <td>
                        <form method="post" action="/Head/Index/">
                            <input type="hidden" name="userId" value="@ViewBag.allUsers[i].id" />
                            <input type="hidden" name="newRole" value="customer" />
                            @if (@ViewBag.allUsers[i].role == "customer")
                            {
                                <input type="submit" value="Пользователь" disabled />
                            }
                            else
                            {
                                <input type="submit" value="Пользователь" />
                            }
                        </form>
                        <form method="post" action="/Head/Index/">
                            <input type="hidden" name="userId" value="@ViewBag.allUsers[i].id" />
                            <input type="hidden" name="newRole" value="employee" />
                            @if (@ViewBag.allUsers[i].role == "employee")
                            {
                                <input type="submit" value="Менеджер" disabled />
                            }
                            else
                            {
                                <input type="submit" value="Менеджер" />
                            }
                        </form>
                        <form method="post" action="/Head/Index/">
                            <input type="hidden" name="userId" value="@ViewBag.allUsers[i].id" />
                            <input type="hidden" name="newRole" value="head" />
                            @if (@ViewBag.allUsers[i].role == "head")
                            {
                                <input type="submit" value="Главный менеджер" disabled />
                            }
                            else
                            {
                                <input type="submit" value="Главный менеджер" />
                            }
                        </form>
                    </td>
                </tr>
            }
        }
    </tbody>
</table>
